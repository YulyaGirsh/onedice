<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneDice - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .container {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #2d5a2d; }
        .error { background: #5a2d2d; }
        .info { background: #2d4a5a; }
        .btn {
            background: #2481cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover { opacity: 0.8; }
        .links {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .link {
            color: #2481cc;
            text-decoration: none;
            padding: 10px;
            border: 1px solid #2481cc;
            border-radius: 5px;
        }
        .link:hover { background: #2481cc; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé≤ OneDice - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</p>
    </div>

    <div class="container">
        <h2>üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤</h2>
        <div id="status">
            <div class="info">–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ä–≤–∏—Å—ã...</div>
        </div>
        <button class="btn" onclick="checkServices()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
    </div>

    <div class="container">
        <h2>üîó –°—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="links">
            <a href="http://localhost:3000" class="link" target="_blank">
                Frontend (React)
            </a>
            <a href="http://localhost:4000/ping" class="link" target="_blank">
                Backend API
            </a>
            <a href="index-simple.html" class="link" target="_blank">
                –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è
            </a>
            <a href="index-mini-app.html" class="link" target="_blank">
                –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è
            </a>
        </div>
    </div>

    <div class="container">
        <h2>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–∞—Ö</h2>
        <ul>
            <li><strong>Frontend:</strong> http://localhost:3000 (React + Vite)</li>
            <li><strong>Backend:</strong> http://localhost:4000 (Node.js + Express)</li>
            <li><strong>Bot:</strong> –ó–∞–ø—É—â–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ</li>
            <li><strong>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</strong> SQLite (server/game.db)</li>
        </ul>
    </div>

    <div class="container">
        <h2>üéÆ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</h2>
        <ol>
            <li>–û—Ç–∫—Ä–æ–π—Ç–µ <a href="http://localhost:3000" target="_blank">Frontend</a></li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Backend</li>
            <li>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–æ–±–±–∏</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram –±–æ—Ç–∞</li>
        </ol>
    </div>

    <script>
        async function checkServices() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<div class="info">–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ä–≤–∏—Å—ã...</div>';
            
            let html = '';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ Frontend
            try {
                const frontendResponse = await fetch('http://localhost:3000');
                if (frontendResponse.ok) {
                    html += '<div class="success">‚úÖ Frontend (React) - –†–∞–±–æ—Ç–∞–µ—Ç</div>';
                } else {
                    html += '<div class="error">‚ùå Frontend (React) - –û—à–∏–±–∫–∞</div>';
                }
            } catch (error) {
                html += '<div class="error">‚ùå Frontend (React) - –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ Backend
            try {
                const backendResponse = await fetch('http://localhost:4000/ping');
                if (backendResponse.ok) {
                    const data = await backendResponse.json();
                    html += '<div class="success">‚úÖ Backend (API) - –†–∞–±–æ—Ç–∞–µ—Ç</div>';
                } else {
                    html += '<div class="error">‚ùå Backend (API) - –û—à–∏–±–∫–∞</div>';
                }
            } catch (error) {
                html += '<div class="error">‚ùå Backend (API) - –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–±–±–∏
            try {
                const lobbiesResponse = await fetch('http://localhost:4000/games');
                if (lobbiesResponse.ok) {
                    const lobbies = await lobbiesResponse.json();
                    html += `<div class="success">‚úÖ –õ–æ–±–±–∏ API - –†–∞–±–æ—Ç–∞–µ—Ç (${lobbies.length} –ª–æ–±–±–∏)</div>`;
                } else {
                    html += '<div class="error">‚ùå –õ–æ–±–±–∏ API - –û—à–∏–±–∫–∞</div>';
                }
            } catch (error) {
                html += '<div class="error">‚ùå –õ–æ–±–±–∏ API - –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
            }
            
            statusDiv.innerHTML = html;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', checkServices);
    </script>
</body>
</html>
